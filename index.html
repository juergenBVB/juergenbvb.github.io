<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
		<script>
		  
		</script>
	</head>
  <body>

    <div id="accordion">Loading...</div>

    <script type="text/javascript" src="tabletop-master/src/tabletop.js"></script>
    <script type="text/javascript">
      window.onload = function() { init() };
      var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/1Hvj4Awh6Tr7Kdh2CT7QUhFZitcHNgjb2twtpyIvm8bc/pubhtml';
      function init() {
        Tabletop.init( { key: public_spreadsheet_url,
                         callback: showInfo,
                         simpleSheet: true } );
      }
      function showInfo(data) {
        // data comes through as a simple array since simpleSheet is turned on	
		var htmldata = "";
		for (var i = data.length - 1; i >= 0; i--){
		  //Section
		  htmldata = htmldata + "<h3 class='category'>" + data[i]["Timestamp"] + " - " + data[i]["What is your in-game name? "] + "</h3>";
		  
		  //Content
		  var currentdata = data[i];
		  var age = currentdata["Age:"];
		  var screenshots = currentdata["Base and profile screenshot"];
		  if (screenshots.length > 12) {
			screenshots = "<a href='" + screenshots+ "' target = '_blank'>"+ screenshots + "</a>"
		  }
		  
		  var foundclan = currentdata["How did you find the clan? "];
		  var ingamegoal = currentdata["In game, what is your goal that you are working toward right now?"];
		  var groupmebool = currentdata["If you are accepted then you are willing to install and use the app, GroupMe to communicatie with other clan members?"];
		  var warstars = currentdata["How many war stars do you have?"];
		  var notlied = currentdata["I have not lied and have read and agree to the Viking Rules!"];
		  var friendinneed = currentdata["What is your friend in need score?"];
		  var redditname = currentdata["What is your Reddit name?"];
		  if (redditname.length > 3) {
			redditname = "<a href='http://www.reddit.com/u/" + redditname + "' target = '_blank'>" + redditname + "</a>";
		  }
		  
		  var timezone = currentdata["Where are you from or/and what is your time-zone?"];
		  var bklevel = currentdata["Barbarian King level:"];
		  var aqlevel = currentdata["Archer Queen level:"];
		  var gwlevel = currentdata["Grand Warden level:"];
		  var townhalllevel = currentdata["Townhall Level:"];
		  var goodviking = currentdata["Why do you want to be a Viking? And what is it you think that would make you a good member of our clan?"];
		  
		  htmldata = htmldata + "<div><table class='data'>";
		  
		  htmldata = htmldata + "<tr><td>Age</td><td>" + age + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Townhall Level</td><td>" + townhalllevel + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Reddit Name</td><td>" + redditname + "</td></tr>";
		  htmldata = htmldata + "<tr><td>War Stars</td><td>" + warstars + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Barbarian King Level</td><td>" + bklevel + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Archer Queen Level</td><td>" + aqlevel + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Grand Warden Level</td><td>" + gwlevel + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Friend in Need Score</td><td>" + friendinneed + "</td></tr>";
		  htmldata = htmldata + "<tr><td>In game, what is your goal that you are working toward right now?</td><td>" + ingamegoal + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Why do you want to be a Viking? And what is it you think that would make you a good member of our clan?</td><td>" + goodviking + "</td></tr>";
		  htmldata = htmldata + "<tr><td>How did you find the clan</td><td>" + foundclan + "</td></tr>";
		  htmldata = htmldata + "<tr><td>If you are accepted then you are willing to install and use the app, GroupMe to communicatie with other clan members?</td><td>" + groupmebool + "</td></tr>";
		  htmldata = htmldata + "<tr><td>Base and profile Screenshots</td><td>" + screenshots + "</td></tr>";		  
		  htmldata = htmldata + "<tr><td>Where are you from or/and what is your time-zone?</td><td>" + timezone + "</td></tr>";
		  htmldata = htmldata + "<tr><td>I have not lied and have read the rules</td><td>" + notlied + "</td></tr>";		  
		  htmldata = htmldata + "</table></div>";
		  
		}
		document.getElementById("accordion").innerHTML = htmldata;

		//setup accordion view
			$(function() {
			$( "#accordion" ).accordion({
				heightStyle: "content",
				header: '.category'
			
			});
			$("td").css("padding", "5px");
			$("tr:even").css("background-color", "#eeeeee");
			$("tr:odd").css("background-color", "#ffffff");
		  });		
		
        console.log(data);
      }        
    </script>
  </body>
</html>
